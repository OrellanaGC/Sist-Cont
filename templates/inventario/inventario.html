{% extends 'base/base.html' %}
{% load staticfiles %}
{% block links %}
<!-- Bootstrap select CSS -->
<link type="text/css" rel="stylesheet" href="{% static 'css/bootstrap-select.min.css' %}">
<!-- Custom CSS -->
<link type="text/css" rel="stylesheet" href="{% static 'css/custom.css' %}">
{% endblock %}
{% block content %}
<!-- Inicio contenido -->
    <div class="container">
      <div class="row">
        <div class="col-3">
          <div class="dropdown show">
            <a class="btn btn-outline-success dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="periodo">
              Seleccionar período
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
              {% for mov in object_list %}
              <a class="dropdown-item" href="#">{{mov.fechaInicio|date:"M"}} - {{mov.fechaFin|date:"M"}}</a>
              {% empty %}
              <a class="dropdown-item" href="#">PERIODO PRUEBA</a>
              {% endfor %}
            </div>
          </div>  <br>
          <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action font-weight-bold" data-toggle="collapse" data-target="#demo1">Bolsos de Hombre</a>
              <div id="demo1" class="collapse">
                {% if object_list %}
                  {% for mov in object_list %}
                    {% if mov.producto.categoria.idCategoria == 01 %}
                    <a href="#" class="list-group-item list-group-item-action">{{mov.producto.nombre}}</a>
                    {% endif %}
                  {% endfor %}
                {% else %}
                  <a href="#" class="list-group-item list-group-item-action">Ya es toda</a>
                {% endif %}
              </div>
            <a href="#" class="list-group-item list-group-item-action font-weight-bold" data-toggle="collapse" data-target="#demo2">Carteras de Mujer</a>
              <div id="demo2" class="collapse">
                {% if object_list %}
                  {% for mov in object_list %}
                    {% if mov.producto.categoria.idCategoria == 02 %}
                    <a href="#" class="list-group-item list-group-item-action">{{mov.producto.nombre}}</a>
                    {% endif %}
                  {% endfor %}
                {% else %}
                  <a href="#" class="list-group-item list-group-item-action">Ya es toda x2</a>
                {% endif %}
              </div>
          </div>                
        </div>   
        <!--Pegando nueva tabla-->

        <table class="table table-hover col-9">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th colspan="2">Entradas</th>
      <th colspan="2">Salidas</th>
      <th></th>
    </tr>
    <tr>
      <th>Fecha</th>
      <th>Tipo</th>
      <th>Factura</th>
      <!--campo para comprobacion-->
      <th>Inventario disp.</th>

      <th>Precio Unitario</th>
      <th>Cantidad</th>
      <th>Valores</th>
      <th>Cantidad</th>
      <th>Valores</th>
      <th>Saldo</th>
      <!--campo para comprobacion-->
      <th>Op.Comprobación</th>
    </tr>
  </thead>
 <!--probando para una sola fila, se debe usar un foreach para mandar a traer todos los datos-->
  <tbody>
    <tr>
      <td><!--manda a llamar a fecha--></td>
      <td><!--manda a llamar a tipo--></td>
      <td><!--manda a llamar factura--></td>
      <td id="comprobacionInv" name="invent"><!--campo para comprobacion--></td>
      <td name="precioUnitario"><!--manda a llamar a precio--></td>
      <td name="cantIn"><!--Entrada: manda a llamar a cantidad--></td>
      <td id="valorIn" name="valorIn" onload="compraValor(precioUnitario, cantIn)"><!--Entrada: manda a llamar a valores--></td>
      <td name="cantOut"><!--Salida: manda a llamar a cantidad--></td>
      <td id="valorOut" name="valorOut" onload="compraValor(precioUnitario, cantOut)"><!--Salida: manda a llamar a valores--></td>
      <td id="saldo" name="saldo"><!--calcula saldo--></td>
      <td name="comprobacionSaldo"><!--campo para comprobacion--></td>
    </tr>
  </tbody>
  <script type="text/javascript">
    function compraValor(invent,precioUnitario, cantIn){
      var valor;
      //variable de comprobacion del inventario existente
      var inventario=0;
      //comprobar si hay algun valor en la casilla de inventario
      if(invent.value != null){
        inventario = parseFloat(invent.value);
      }
      inventario = inventario+parseFloat(cantIn.value);
      //calculo del valor de la entrada
      valor = parseFloat(precioUnitario.value)*parseFloat(canIn.value);
      //asignacion de los valores a sus respectivas casillas
      document.getElementById("valorIn").value=valor;
      document.getElementById("comprobacionInv").value=inventario;

    }

    function ventaValor(invent, precioUnitario, cantOut){
      var valor;
      var inventario;
      //mandando a traer el inventario presente
      inventario = parseFloat(invent.value);
      //haciendo el cambio ya que la venta disminuye el inventario
      inventario = inventario-parseFloat(cantOut);
      valor = valor = parseFloat(precioUnitario.value)*parseFloat(canOut.value);
      //asignacion de valores a sus casillas
      document.getElementById("valorOut").value=valor;
      document.getElementById("comprobacionInv").value=inventario;

    }

    function calcularSaldo(saldoIni, valorIn, valorOut){
      var saldo=0;
      if(saldoIni.value !=null){
        saldo=parseFloat(saldoIni.value);
      }
      if(valorIn!= null){
        saldo=saldo+parseFloat(valorIn.value);
        if(valorOut!=null){
          saldo=saldo-parseFloat(valorOut.value);
        }
      }
      document.getElementById("saldo").value=saldo;
    }

    function devCompra(cantIn, precioUnitario, invent){
      var inventario;
      var valor;
      inventario=parseFloat(inventario.value);
      inventario=inventario-parseFloat(cantIn.value);
      valor = parseFloat(precioUnitario.value)*parseFloat(canIn.value);
      document.getElementById("valorIn").value=valor;
      document.getElementById("comprobacionInv").value=inventario;

    }

    function devVenta(cantOut, precioUnitario, invent){
      var inventario;
      var valor;
      inventario=parseFloat(inventario.value);
      inventario=inventario+parseFloat(cantIn.value);
      valor = parseFloat(precioUnitario.value)*parseFloat(canOut.value);
      document.getElementById("valorOut").value=valor;
      document.getElementById("comprobacionInv").value=inventario;
    }

  </script>
</table>

        <!--table class="table table-hover col-9">
          <thead>
            <tr>
              <th colspan="9" scope="col">Producto: xxxxx</th>
            </tr>
            <tr>
              <th scope="col">Código: ######</th>
              <th rowspan="2" colspan="3" scope="col">Recibido: xxxxxxx</th>
              <th rowspan="2" colspan="3" scope="col">Entregado: xxxxxxxx</th>
              <th rowspan="2" colspan="3" scope="col">Saldo</th>
            </tr>
            <tr> -->
            	<!--th scope="col">Código: ######</th-->
            <!--/tr>
            <tr>
            	<th scope="col">Fecha</th>
            	<th scope="col">Cantidad</th>
            	<th scope="col">Costo</th>
            	<th scope="col">Saldo</th>
            	<th scope="col">Cantidad</th>
            	<th scope="col">Costo</th>
            	<th scope="col">Saldo</th>
            	<th scope="col">Cantidad</th>
            	<th scope="col">Costo</th>
            	<th scope="col">Saldo</th>
            </tr>
          </thead>
          <tbody>
            <tr>
            	<td scope="row">02/01/19</td>
            	<td>##</td>
            	<td>$$</td>
            	<td>$$$</td>
            	<td>##</td>
            	<td>$$</td>
            	<td>$$$</td>
            	<td>##</td>
            	<td>$$</td>
            	<td>$$$</td>
            </tr>
            <tr>
              <th scope="row">31/01/19</th>
              <td></td>
              <td></td>
              <td>$$$ total</td>
              <td></td>
              <td></td>
              <td>$$$ total</td>
              <td></td>
              <td></td>
              <td>$$$ total</td>
            </tr>
          </tbody>
        </table-->
      </div>
      <br/>
      <!--div class="row justify-content-end">
        <button type="button" class="btn btn-outline-primary ">Actualizar</button>
        <button type="button" class="btn btn-outline-success">Imprimir reporte</button>
      </div-->
    </div>
{% endblock %}
{% block scripts %}
<script type="text/javascript" src="{% static 'js/bootstrap-select.min.js' %}"></script>
{% csrf_token %}
<!--script type="text/javascript" src="{% static 'js/transaccion/transaccion.js' %}"></script-->
{% endblock %}
